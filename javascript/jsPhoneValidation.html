<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="wrapper">
      <h1>Phone Survey Form</h1>
      <form onsubmit="handleSubmit(event)">
        <label for="age">Your age</label>
        <input
          type="number"
          id="q_age"
          min="0"
          oninput="ageChange(event)"
          value="0"
        />
        <br />
        <label for="q_owns_phone">Do you own a phone</label>
        <input type="checkbox" id="q_owns_phone" />
        <br />

        <button type="submit">Submit</button>
      </form>
      <div id="errors-holder"></div>
      <div id="result-holder"></div>
    </div>
    <script>
      // function ageChange(e) {
      //   console.log(e);
      //   if (e.target.value.length === 0 || e.target.value == 0) {
      //     document.querySelector("#errors-holder").innerHTML =
      //       "Please choose age";
      //   }
      //   if (e.target.value < 5) {
      //     document.querySelector("#errors-holder").innerHTML =
      //       "You need to be atleast 5 years old to participate";
      //     document.querySelector("button").setAttribute("disabled");
      //   } else if (e.target.value >= 5) {
      //     document.querySelector("#errors-holder").innerHTML = "";
      //     document.querySelector("button").removeAttribute("disabled");
      //   }
      // }

      // function handleSubmit(e) {
      //   e.preventDefault();
      //   if (
      //     document.querySelector("#q_age").value.length === 0 ||
      //     document.querySelector("#q_age").value == 0
      //   ) {
      //     document.querySelector("#errors-holder").innerHTML =
      //       "Please choose age";
      //   } else {
      //     if (document.querySelector("#q_owns_phone").checked) {
      //       if (document.querySelector("#q_age").value < 13) {
      //         document.querySelector("#result-holder").innerHTML =
      //           "You are too young to have a phone";
      //       } else
      //         document.querySelector("#result-holder").innerHTML =
      //           "Use your phone in moderation";
      //     } else if (document.querySelector("#q_age").value < 13)
      //       document.querySelector("#result-holder").innerHTML =
      //         "You will get a phone soon";
      //     else
      //       document.querySelector("#result-holder").innerHTML =
      //         "You should get a phone";
      //   }
      // }


      const btn = document.querySelector("button")
      const error_holder = document.querySelector("#errors-holder")
      const result_holder = document.querySelector("#result-holder")
      const age = document.querySelector("#q_age");
      const ownsPhone = document.querySelector("#q_owns_phone")

      function ageChange(e) {
        // const age = Number(e.target.value);
        if (Number(age.value) < 5) {
          btn.disabled = true;
          error_holder.innerHTML =
            "You need to be atleast 5 years old to participate";
        } else {
          btn.disabled = false;
          error_holder.innerHTML = "";
        }
      }

      function handleSubmit(e) {
        error_holder.innerHTML = "";
        e.preventDefault();
        
        if (Number(age.value) === 0) {
          error_holder.innerHTML =
            "Please choose age";
          return;
        }
        if (ownsPhone.checked) {
          if (Number(age.value) < 13) {
            result_holder.innerHTML =
              "You are too young to have a phone";
          } else {
            result_holder.innerHTML =
              "Use your phone in moderation";
          }
        } else {
          if (Number(age.value) < 13) {
            result_holder.innerHTML =
              "You will get a phone soon";
          } else {
            result_holder.innerHTML =
              "You should get a phone";
          }
        }
      }
    </script>
  </body>
</html>
